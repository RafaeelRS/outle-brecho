<h2>Login</h2>
<button id="login-google">Entrar com Google</button>
<button id="logout" style="display:none;">Sair</button>

<div id="area-admin" style="display:none;">
  <!-- aqui entra o seu formulário de cadastro e a listagem -->
</div>

<script>
  const { createClient } = supabase;
  const client = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // Login com Google
  document.getElementById("login-google").addEventListener("click", async () => {
    await client.auth.signInWithOAuth({
      provider: 'google',
      options: { redirectTo: window.location.href }
    });
  });

  // Logout
  document.getElementById("logout").addEventListener("click", async () => {
    await client.auth.signOut();
    location.reload();
  });

  // Detecta sessão
  client.auth.onAuthStateChange((event, session) => {
    if (session) {
      document.getElementById("login-google").style.display = "none";
      document.getElementById("logout").style.display = "inline-block";
      document.getElementById("area-admin").style.display = "block";
    } else {
      document.getElementById("login-google").style.display = "inline-block";
      document.getElementById("logout").style.display = "none";
      document.getElementById("area-admin").style.display = "none";
    }
  });
</script>
